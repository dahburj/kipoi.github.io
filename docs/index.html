<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="None">
  
  <link rel="shortcut icon" href="img/favicon.ico">
  <title>Home - Kipoi documentation</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="css/theme.css" type="text/css" />
  <link rel="stylesheet" href="css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Home";
    var mkdocs_page_input_path = "index.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="js/jquery-2.1.1.min.js" defer></script>
  <script src="js/modernizr-2.8.3.min.js" defer></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="." class="icon icon-home"> Kipoi documentation</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="./search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1 current">
		
    <a class="current" href=".">Home</a>
    <ul class="subnav">
            
    <li class="toctree-l2"><a href="#kipoi-model-zoo-for-genomics">Kipoi: Model zoo for genomics</a></li>
    
        <ul>
        
            <li><a class="toctree-l3" href="#links">Links</a></li>
        
            <li><a class="toctree-l3" href="#installation">Installation</a></li>
        
            <li><a class="toctree-l3" href="#quick-start">Quick start</a></li>
        
            <li><a class="toctree-l3" href="#plugins">Plugins</a></li>
        
            <li><a class="toctree-l3" href="#documentation">Documentation</a></li>
        
            <li><a class="toctree-l3" href="#citing-kipoi">Citing Kipoi</a></li>
        
            <li><a class="toctree-l3" href="#development">Development</a></li>
        
        </ul>
    

    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Using</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="using/python/">Python</a>
                </li>
                <li class="">
                    
    <a class="" href="using/cli/">CLI</a>
                </li>
                <li class="">
                    
    <a class="" href="using/R/">R</a>
                </li>
                <li class="">
                    
    <a class="" href="using/plugins/">Plugins</a>
                </li>
                <li class="">
                    
    <a class="" href="using/03_Model_sources/">Private and public model sources</a>
                </li>
                <li class="">
                    
    <a class="" href="using/04_Installing_on_OSX/">Installing on OSX</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Contributing</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="contributing/01_Getting_started/">Getting started</a>
                </li>
                <li class="">
                    
    <a class="" href="contributing/02_Writing_model.yaml/">model.yaml</a>
                </li>
                <li class="">
                    
    <a class="" href="contributing/04_Writing_dataloader.py/">dataloader.py</a>
                </li>
                <li class="">
                    
    <a class="" href="contributing/03_Writing_dataloader.yaml/">dataloader.yaml</a>
                </li>
                <li class="">
                    
    <a class="" href="contributing/05_Writing_model.py/">model.py</a>
                </li>
                <li class="">
                    
    <a class="" href="contributing/06_dumping_models_programatically/">Multiple very similar models</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Tutorials</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="tutorials/contributing_models/">Contributing models</a>
                </li>
                <li class="">
                    
    <a class="" href="tutorials/python-api/">Python API</a>
                </li>
                <li class="">
                    
    <a class="" href="tutorials/R-api/">R API</a>
                </li>
                <li class="">
                    
    <a class="" href="tutorials/tf_binding_models/">Comparing models</a>
                </li>
                <li class="">
                    
    <a class="" href="tutorials/composing_models/">Composing models</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Api</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="api/list_/">list</a>
                </li>
                <li class="">
                    
    <a class="" href="api/install_/">install</a>
                </li>
                <li class="">
                    
    <a class="" href="api/model/">Model</a>
                </li>
                <li class="">
                    
    <a class="" href="api/dataloader/">Dataloader</a>
                </li>
                <li class="">
                    
    <a class="" href="api/pipeline/">Pipeline</a>
                </li>
                <li class="">
                    
    <a class="" href="api/sources/">sources</a>
                </li>
                <li class="">
                    
    <a class="" href="api/metadata/">metadata</a>
                </li>
                <li class="">
                    
    <a class="" href="api/readers/">readers</a>
                </li>
                <li class="">
                    
    <a class="" href="api/writers/">writers</a>
                </li>
    </ul>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href=".">Kipoi documentation</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".">Docs</a> &raquo;</li>
    
      
    
    <li>Home</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="http://github.com/kipoi/kipoi/edit/master/docs/index.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="kipoi-model-zoo-for-genomics">Kipoi: Model zoo for genomics</h1>
<p><a href='https://circleci.com/gh/kipoi/kipoi'>
    <img alt='CircleCI' src='https://circleci.com/gh/kipoi/kipoi.svg?style=svg' style="max-height:20px;width:auto">
</a>
<a href=https://coveralls.io/github/kipoi/kipoi?branch=master>
    <img alt='Coverage status' src=https://coveralls.io/repos/github/kipoi/kipoi/badge.svg?branch=master style="max-height:20px;width:auto;">
</a>
<a href=https://gitter.im/kipoi>
    <img alt='Gitter' src=https://badges.gitter.im/kipoi/kipoi.svg style="max-height:20px;width:auto;">
</a></p>
<p>This repository implements a python package and a command-line interface (CLI) to access and use models from Kipoi-compatible model zoo's.</p>
<p><img src="http://kipoi.org/static/img/fig1_v8_hires.png" width=600></p>
<h2 id="links">Links</h2>
<ul>
<li><a href="http://kipoi.org">kipoi.org</a> - Main website</li>
<li><a href="http://kipoi.org/docs">kipoi.org/docs</a> - Documentation</li>
<li><a href="https://github.com/kipoi/models">github.com/kipoi/models</a> - Model zoo for genomics maintained by the Kipoi team</li>
<li><a href="https://doi.org/10.1101/375345">bioarxiv preprint</a> - Kipoi: accelerating the community exchange and reuse of predictive models for genomics</li>
</ul>
<h2 id="installation">Installation</h2>
<h3 id="1-install-minicondaanaconda">1. Install miniconda/anaconda</h3>
<p>Kipoi requires <a href="https://conda.io/">conda</a> to manage model dependencies.
Make sure you have either anaconda (<a href="https://conda.io/miniconda.html">download page</a>) or miniconda (<a href="https://www.anaconda.com/download/">download page</a>) installed. If you are using OSX, see <a href="http://kipoi.org/docs/using/04_Installing_on_OSX/">Installing python on OSX</a>.</p>
<h3 id="2-install-git-lfs">2. Install Git LFS</h3>
<p>For downloading models, Kipoi uses git and <a href="https://git-lfs.github.com/">Git Large File Storage</a> (LFS). See how to install git <a href="https://www.atlassian.com/git/tutorials/install-git">here</a>. To install git-lfs on Ubuntu, run:</p>
<pre><code class="bash">curl -s https://packagecloud.io/install/repositories/github/git-lfs/script.deb.sh | sudo bash
sudo apt-get install -y git git-lfs
git-lfs install
</code></pre>

<p>Alternatively, you can install git-lfs through conda:</p>
<pre><code class="bash">conda install -c conda-forge git-lfs &amp;&amp; git lfs install
</code></pre>

<h3 id="3-install-kipoi">3. Install Kipoi</h3>
<p>Next, install Kipoi using <a href="https://pip.pypa.io/en/stable/">pip</a>:</p>
<pre><code class="bash">pip install kipoi
</code></pre>

<h2 id="quick-start">Quick start</h2>
<p>The following diagram gives a short overview over Kipoi's workflow:
<img src="http://kipoi.org/docs/img/kipoi-workflow.png" height=400></p>
<p>If you want to check which models are available in Kipoi you can use the <a href="http://kipoi.org/groups/">website</a>, where you can also see example commands for how to use the models on the CLI, python and R.
Alternatively you can run <code>kipoi ls</code> in the command line or in python:</p>
<pre><code class="python">import kipoi

kipoi.list_models()
</code></pre>

<p>Once a model has been selected (here: <code>rbp_eclip/UPF1</code>), the model environments have to be installed. To do so use one of the <code>kipoi env</code> commands.
For example to install an environment for model <code>rbp_eclip/UPF1</code>:</p>
<pre><code class="bash">kipoi env create rbp_eclip/UPF1
</code></pre>

<hr />
<p><strong> Aside: models versus model groups</strong>: </p>
<blockquote>
<p>A Kipoi <code>model</code> is a path to a directory containing a <code>model.yaml</code> file.  This file specifies the underlying model, data loader, and other model attributes.<br />
If instead you provide a path to a model <em>group</em> (e.g  "rbp_eclip" or "lsgkm-SVM/Tfbs/Ap2alpha/"), rather than one model (e.g "rbp_eclip/UPF1" or "lsgkm-SVM/Tfbs/Ap2alpha/Helas3/Sydh_Std"), or any other directory without a <code>model.yaml</code> file, a <code>ValueError</code> will be thrown.</p>
</blockquote>
<hr />
<p>If you are working on a machine that has GPUs, you will want to add the <code>--gpu</code> flag to the command. And if you want to make use of the <code>kipoi-veff</code> plug-in then add <code>--vep</code>. For more options please run <code>kipoi env create --help</code>.</p>
<p>The command will tell you how the execution environment for the model is called, e.g.:</p>
<p><code>INFO [kipoi.cli.env] Environment name: kipoi-rbp_eclip__UPF1</code></p>
<p>Before using a model in any way, make sure that you have activated its environment, e.g.: prior to executing <code>kipoi</code> or <code>python</code> or <code>R</code> in the attempt to use Kipoi with the model. To activate the model environment run for example:</p>
<pre><code class="bash">source activate kipoi-rbp_eclip__UPF1
</code></pre>

<h3 id="command-line">Command-line</h3>
<p>Once the model environment is activated Kipoi's API can be accessed from the commandline using:</p>
<pre><code>$ kipoi
usage: kipoi &lt;command&gt; [-h] ...

    # Kipoi model-zoo command line tool. Available sub-commands:
    # - using models:
    ls               List all the available models
    list_plugins     List all the available plugins
    info             Print dataloader keyword argument info
    predict          Run the model prediction
    pull             Download the directory associated with the model
    preproc          Run the dataloader and save the results to an hdf5 array
    env              Tools for managing Kipoi conda environments

    # - contributing models:
    init             Initialize a new Kipoi model
    test             Runs a set of unit-tests for the model
    test-source      Runs a set of unit-tests for many/all models in a source

    # - plugin commands:
    veff             Variant effect prediction
    interpret        Model interpretation using feature importance scores like ISM, grad*input or DeepLIFT.
</code></pre>

<p>Explore the CLI usage by running <code>kipoi &lt;command&gt; -h</code>. Also, see <a href="http://kipoi.org/docs/using/01_Getting_started/#command-line-interface-quick-start">docs/using/getting started cli</a> for more information.</p>
<h3 id="python">Python</h3>
<p>Once the model environment is activated (<code>source activate kipoi-rbp_eclip__UPF1</code>) Kipoi's python API can be used to:</p>
<p>The following commands give a short overview. For details please take a look at the python API documentation.
Load the model from model the source:</p>
<pre><code class="python">import kipoi
model = kipoi.get_model(&quot;rbp_eclip/UPF1&quot;) # load the model
</code></pre>

<p>To get model predictions using the dataloader we can run:</p>
<pre><code class="python">model.pipeline.predict(dict(fasta_file=&quot;hg19.fa&quot;,
                            intervals_file=&quot;intervals.bed&quot;,
                            gtf_file=&quot;gencode.v24.annotation_chr22.gtf&quot;))
# runs: raw files -[dataloader]-&gt; numpy arrays -[model]-&gt; predictions 
</code></pre>

<p>To predict the values of a model input <code>x</code>, which for example was generated by dataloader, we can use:</p>
<pre><code class="python">model.predict_on_batch(x) # implemented by all the models regardless of the framework
</code></pre>

<p>Here <code>x</code> has to be a <code>numpy.ndarray</code> or a list or a dict of a <code>numpy.ndarray</code>, depending on the model requirements, for details please see the documentation of the API or of <code>datalaoder.yaml</code> and <code>model.yaml</code>.</p>
<p>For more information see: <a href="notebooks/python-api.ipynb">notebooks/python-api.ipynb</a> and <a href="http://kipoi.org/docs/using/01_Getting_started/">docs/using getting started</a></p>
<h3 id="configure-kipoi-in-kipoiconfigyaml">Configure Kipoi in <code>.kipoi/config.yaml</code></h3>
<p>You can add your own (private) model sources. See <a href="http://kipoi.org/docs/using/03_Model_sources/">docs/using/03_Model_sources/</a>.</p>
<h3 id="contributing-models">Contributing models</h3>
<p>See <a href="http://kipoi.org/docs/contributing/01_Getting_started/">docs/contributing getting started</a> and <a href="http://kipoi.org/docs/tutorials/contributing_models/">docs/tutorials/contributing/models</a> for more information.</p>
<h2 id="plugins">Plugins</h2>
<p>Kipoi supports plug-ins which are published as additional python packages. Two plug-ins that are available are:</p>
<h3 id="kipoi_veff"><a href="https://github.com/kipoi/kipoi-veff">kipoi_veff</a></h3>
<p>Variant effect prediction plugin compatible with (DNA) sequence based models. It allows to annotate a vcf file using model predictions for the reference and alternative alleles. The output is written to a new VCF file. For more information see <a href="https://github.com/kipoi/kipoi/blob/master/notebooks/variant_effect_prediction_simple.ipynb">tutorials/variant_effect_prediction_simple/</a> or <a href="http://kipoi.org/docs/tutorials/variant_effect_prediction/">tutorials/variant_effect_prediction/</a>.</p>
<pre><code class="bash">pip install kipoi_veff
</code></pre>

<h3 id="kipoi_interpret"><a href="https://github.com/kipoi/kipoi-interpret">kipoi_interpret</a></h3>
<p>Model interpretation plugin for Kipoi. Allows to use feature importance scores like in-silico mutagenesis (ISM), saliency maps or DeepLift with a wide range of Kipoi models. <a href="https://github.com/kipoi/kipoi-interpret/blob/master/notebooks/1-DNA-seq-model-example.ipynb">example notebook</a></p>
<pre><code class="bash">pip install kipoi_interpret
</code></pre>

<h2 id="documentation">Documentation</h2>
<p>Documentation can be found here: <a href="http://kipoi.org/docs">kipoi.org/docs</a></p>
<h2 id="citing-kipoi">Citing Kipoi</h2>
<p>If you use Kipoi for your research, please cite the publication of the model you are using (see model's <code>cite_as</code> entry) and our Bioarxiv preprint: https://doi.org/10.1101/375345.</p>
<pre><code class="bibtex">@article {kipoi,
    author = {Avsec, Ziga and Kreuzhuber, Roman and Israeli, Johnny and Xu, Nancy and Cheng, Jun and Shrikumar, Avanti and Banerjee, Abhimanyu and Kim, Daniel S and Urban, Lara and Kundaje, Anshul and Stegle, Oliver and Gagneur, Julien},
    title = {Kipoi: accelerating the community exchange and reuse of predictive models for genomics},
    year = {2018},
    doi = {10.1101/375345},
    publisher = {Cold Spring Harbor Laboratory},
    URL = {https://www.biorxiv.org/content/early/2018/07/24/375345},
    eprint = {https://www.biorxiv.org/content/early/2018/07/24/375345.full.pdf},
    journal = {bioRxiv}
}
</code></pre>

<h2 id="development">Development</h2>
<p>If you want to help with the development of Kipoi, you are more than welcome to join in! </p>
<p>For the local setup for development, you should install <code>kipoi</code> using:</p>
<pre><code class="bash">conda install pytorch-cpu
pip install -e '.[develop]'
</code></pre>

<p>This will install some additional packages like <code>pytest</code>. You can test the package by running <code>py.test</code>. </p>
<p>If you wish to run tests in parallel, run <code>py.test -n 6</code>.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="using/python/" class="btn btn-neutral float-right" title="Python">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="http://github.com/kipoi/kipoi/" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
      
        <span style="margin-left: 15px"><a href="using/python/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '.';</script>
    <script src="js/theme.js" defer></script>
      <script src="search/main.js" defer></script>

</body>
</html>

<!--
MkDocs version : 1.0.4
Build Date UTC : 2018-10-11 11:06:41
-->
